function SaveNewGoal(e){e.preventdefault(),chrome.storage.sync.get("accomplishGoalsList",function(e){var t=e.accomplishGoalsList;void 0===e.accomplishGoalsList&&(t=[]),t.push({title:$("input[name=newgoal-title]").val(),begin:$("input[name=newgoal-begin]").val(),end:$("input[name=newgoal-end]").val(),description:$("input[name=newgoal-description]").val()}),chrome.storage.sync.set({accomplishGoalsList:t})})}function clickedGoal(e){var t=parseInt(e.currentTarget.getAttribute("data-index"));e.currentTarget.parentElement.removeChild(e.currentTarget),chrome.storage.sync.get("accomplishGoalsList",function(e){var a=e.accomplishGoalsList;a.splice(t,1),$("div.goal-item").each(function(){var e=parseInt($(this).attr("data-index"));e>t&&$(this).attr("data-index",e-1)}),chrome.storage.sync.set({accomplishGoalsList:a})})}function Initialize(){chrome.storage.sync.get("accomplishGoalsList",function(e){if(void 0!==e.accomplishGoalsList){var t=0;e.accomplishGoalsList.forEach(function(e){var a="<div class=goal-item data-index="+t+"><span class=goal-property-title>"+e.title+'</span><div class=goal-property-edit> </div><span class="goal-property-end float-right">'+DaysUntil(e.end)+" days</span>";void 0!==e.begin&&(a+='<div class="progress-bar-wrapper"><div class="progress-bar-finished"style="width:'+CurrentProgressToGoal(e.begin,e.end)+'%"></div></div>'),a+="</div>",void 0!==e.description&&(a+='<div class="goal-property-description">'+e.description+"</div>"),a+="</div>",$("#goals-list").append(a),$('div.goal-item[data-index="'+t+'"]').click(clickedGoal),t++})}}),$("#main-form").submit(SaveNewGoal)}function CurrentProgressToGoal(e,t){var a=new Date(t).getTime(),i=new Date(e).getTime(),n=(new Date).getTime();return a<i||a<n?0:(100*((n-i)/(a-i))).toString()}function DaysUntil(e){var t=new Date(e),a=new Date;return Math.round(Math.abs((t.getTime()-a.getTime())/864e5))}$(document).on("DOMContentLoaded",function(){Initialize()});