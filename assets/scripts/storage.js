function SaveNewGoal(e){chrome.storage.sync.get("accomplishGoalsList",function(e){var i=e.accomplishGoalsList;void 0===e.accomplishGoalsList&&(i=[]),i.push({title:$titleInput.val(),begin:$beginInput.val(),end:$endInput.val(),description:$descriptionInput.val()}),chrome.storage.sync.set({accomplishGoalsList:i})}),$goalFormWrapper.fadeOut(100),location.reload()}function Initialize(){chrome.storage.sync.get("accomplishGoalsList",function(e){if(void 0!==e.accomplishGoalsList){var i=0;e.accomplishGoalsList.forEach(function(e){var t="<div class=goal-item data-index="+i+"><nobr><span class=goal-property-title>"+e.title+'</span><div class=goal-property-edit-button> </div><span class="goal-property-end float-right">'+DaysUntil(e.end)+" days</span></nobr>";t+="<input type=hidden name=goal-title />",t+="<input type=hidden name=goal-begin />",t+="<input type=hidden name=goal-end />",t+="<input type=hidden name=goal-description />",void 0!==e.begin&&(t+='<div class="progress-bar-wrapper"><div class="progress-bar-finished"style="width:'+CurrentProgressToGoal(e.begin,e.end)+'%"></div></div>'),t+="</div>",void 0!==e.description&&(t+='<div class="goal-property-description">'+e.description+"</div>"),t+="</div>",$("#goals-list").append(t);var n=$(".goal-item").last();$(n).find("[name=goal-title]").val(e.title),$(n).find("[name=goal-begin]").val(e.begin),$(n).find("[name=goal-end]").val(e.end),$(n).find("[name=goal-description]").val(e.description),i++})}}),$("#main-form").submit(function(e){e.preventDefault()}),$("#new-goal-submit").click(function(){SaveNewGoal()})}function CurrentProgressToGoal(e,i){var t=new Date(i).getTime(),n=new Date(e).getTime(),a=(new Date).getTime();return t<n||t<a?0:(100*((a-n)/(t-n))).toString()}function DaysUntil(e){var i=new Date(e),t=new Date;return Math.round(Math.abs((i.getTime()-t.getTime())/864e5))}$(document).on("DOMContentLoaded",function(){Initialize()});