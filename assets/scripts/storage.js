function SaveNewGoal(){chrome.storage.sync.get("accomplishGoalsList",function(e){var a=e.accomplishGoalsList;void 0===e.accomplishGoalsList&&(a=[]),a.push({title:$("input[name=newgoal-title]").val(),begin:$("input[name=newgoal-begin]").val(),end:$("input[name=newgoal-end]").val(),description:$("input[name=newgoal-description]").val()}),chrome.storage.sync.set({accomplishGoalsList:a})})}function clickedGoal(e){var a=parseInt(e.currentTarget.getAttribute("data-index"));e.currentTarget.parentElement.removeChild(e.currentTarget),chrome.storage.sync.get("accomplishGoalsList",function(e){var t=e.accomplishGoalsList;t.splice(a,1),$("div.goal-item").each(function(){var e=parseInt($(this).attr("data-index"));e>a&&$(this).attr("data-index",e-1)}),chrome.storage.sync.set({accomplishGoalsList:t})})}function Initialize(){chrome.storage.sync.get("accomplishGoalsList",function(e){if(void 0!==e.accomplishGoalsList){var a=0;e.accomplishGoalsList.forEach(function(e){var t="<div class=goal-item data-index="+a+"><span class=goal-property-title>"+e.title+'</span><span class="goal-property-end float-right">'+DaysUntil(e.end)+" days</span>";void 0!==e.begin&&(t+='<div class="progress-bar-wrapper"><div class="progress-bar-finished"style="width:'+CurrentProgressToGoal(e.begin,e.end)+'%"></div></div>'),t+="</div>",void 0!==e.description&&(t+='<div class="goal-property-description">'+e.description+"</div>"),t+="</div>",$("#goals-list").append(t),$('div.goal-item[data-index="'+a+'"]').click(clickedGoal),a++})}}),$("#main-form").submit(SaveNewGoal)}function CurrentProgressToGoal(e,a){var t=new Date(a).getTime(),i=new Date(e).getTime(),n=(new Date).getTime();return t<i||t<n?0:(100*((n-i)/(t-i))).toString()}function DaysUntil(e){var a=new Date(e),t=new Date;return Math.round(Math.abs((a.getTime()-t.getTime())/864e5))}$(document).on("DOMContentLoaded",function(){Initialize()});